apply plugin: 'java'

group = 'com.sourcegraph'
version = '0.0.1-SNAPSHOT'
description = 'Test srclib-java for gradle support.'

repositories {
	mavenCentral()
}

dependencies {
	compile 'com.beust:jcommander:1.30'
}

task srclibCollectMetaInformation << {
	String desc = project.description
	if (desc == null) { desc = "" }
	println "DESCRIPTION $desc"
	println "GROUP $project.group"
	println "VERSION $project.version"
	println "ARTIFACT $project.name"
	println "CLASSPATH $configurations.runtime.asPath"

	project.configurations.each { conf ->
		conf.resolvedConfiguration.getResolvedArtifacts().each {
			String group = it.moduleVersion.id.group
			String name = it.moduleVersion.id.name
			String version = it.moduleVersion.id.version
			String file = it.file
			println "DEPENDENCY $conf.name:$group:$name:$version:$file"
		}
	}
}
